version: '3.8'

services:
  validator-1:
    build: .
    command: cargo run --release --bin lumina-node -- --validator --data-dir /data
    volumes:
      - ./data/v1:/data
    ports:
      - "3001:3000"
      - "4001:4000"

  validator-2:
    build: .
    command: cargo run --release --bin lumina-node -- --validator --data-dir /data
    volumes:
      - ./data/v2:/data
    depends_on:
      - validator-1

  validator-3:
    build: .
    command: cargo run --release --bin lumina-node -- --validator --data-dir /data
    volumes:
      - ./data/v3:/data
    depends_on:
      - validator-1

  # ... extend for 7 validators

  oracle-simulator:
    image: python:3.9-slim
    command: python -c "import time; print('Oracle Simulator Running...')"
    # In real scenario, this would post UpdateOracle transactions
